<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>BattleTop</title>
        <meta name="description" content="Bookkeeping enhancements for table-top battles">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

		<link href='http://fonts.googleapis.com/css?family=Fresca' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

		
		<header>
			<h1 class="hidden">BattleTop!</h1>
			<button id="reset" title="Reset the entire battle!">&#8634;</button>
		
			<nav>
				<ul id="edit-mode">
					<li id="setup-mode" data-bind="css: { active : isInSetupMode }">
						<input type="checkbox" id="setup-mode-toggle" data-bind="checked: isInSetupMode" />
						<label for="setup-mode-toggle">Setup</label>					
					</li>
					<li id="initiative-mode" data-bind="css: { active : isInInitiativeMode }">
						<input type="checkbox" id="initiative-mode-toggle" data-bind="checked: isInInitiativeMode" />
						<label for="initiative-mode-toggle">Init</label>					
					</li>
					<li id="dm-mode" data-bind="css: { active : isInDmMode }">
						<input type="checkbox" id="dm-mode-toggle" data-bind="checked: isInDmMode" />
						<label for="dm-mode-toggle">DM</label>
					</li>
				</ul>
			</nav>
		</header>
		
		<section id="main">
		
			<section id="initiative">
				<div id="initiative-controls">
					<button id="initiative-next" title="Finish current turn, go to next initiative">Next</button>
					Or:
					<button id="initiative-ready" title="Take the 'Ready' action (finishes turn)">Ready</button>
					<button id="initiative-delay" title="Take the 'Delay' action (go to next initiative)">Delay</button>
					
					<div id="current-round">
						Round: 
						<span id="initiative-current-round-number" data-bind="text: combat.currentRound"></span>
					</div>
				</div>
				
				<table>
					<thead>
						<tr>
							<th></th>
							<th>Character</th>
							<th class="number">HP</th>
							<th class="number">Init</th>
							<th class="number">Mod</th>
						</tr>
					</thead>
					<tbody data-bind="foreach: combat.characters">
						<tr data-bind="css: { 'current-player, expanded' : name() == $root.combat.activeCharacter(),
												readied : initiativeState() == 'readied',
												delayed : initiativeState() == 'delayed'
											}">
							<td class="actions">
								<button class="collapse-expand-row"></button>
							</td>
							<td class="character">
								<span class="character-name" data-bind="text: name"></span>
								<ul class="conditions" data-bind="visible: conditions().length != 0, foreach: conditions">
									<li>
										<span data-bind="text: name"></span>,
										<span data-bind="text: roundsLeft"></span>
										more round(s)
									</li>
								</ul>
							</td>
							<td class="number hp" data-bind="text: currentHitPoints"></td>
							<td class="number initiative-total" data-bind="text: currentInitiative"></td>
							<td class="number initiative-modifier" data-bind="text: initiativeModifier"></td>
						</tr>
					</tbody>
				</table>
			</section>
		
		</section>
		
		<footer>
			<ul>
				<li><a href="http://code.google.com/p/battle-top/">More Info</a></li>
				<li><a href="http://code.google.com/p/battle-top/source">Source Code</a></li>			
				<li>&copy; Copyright Jeroen Heijmans 2012. All Rights Reserved.</li>
			</li>
		</footer>
		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.0.js"></script>
		<script src="js/vendor/knockout.mapping-2.3.5.js"></script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>
		<script>
			
		</script>
	</body>
</html>
